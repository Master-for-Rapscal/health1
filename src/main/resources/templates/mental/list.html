<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<!--引入抬头页面-->
<div th:replace="common/header :: header"  ></div>

<div class="easyui-layout" data-options="fit:true">
    <!-- Begin of toolbar -->
    <div id="wu-toolbar">
        <div class="wu-toolbar-button">
            <!--引入菜单页面-->
            <div th:replace="common/menus :: menus"  > </div>
        </div>




        <!--条件搜索-->
        <div class="wu-toolbar-search">
            <label> 姓名:</label><input name="recordName"/>
            <a href="#" id="userSearch" class="easyui-linkbutton" iconCls="icon-search">搜索</a>
        </div>

    </div>

    <!-- End of toolbar 数据table表格 -->
    <table id="data-datagrid" class="easyui-datagrid" toolbar="#wu-toolbar"></table>



</div>


<div id="ULM" style="width: 670px;height: 500px">
    <div class="wu-toolbar-search">
        <label> 姓名:</label><input name="recordName2"/>
        <label> 住址:</label><input name="recordAdress1"/>
        <label> 出生日期:</label><input name="userBirthday1"/>
        <a href="#" id="userSearch1" class="easyui-linkbutton" iconCls="icon-search">搜索</a>
    </div>
    <table id="data-datagrid1" class="easyui-datagrid"></table>
</div>



<!--修改-->
<div id="edit-dialog"   style="width: 840px;height: 500px;border-collapse:collapse;
        border:1px solid black;">
    <form id="edit-form" method="post">
<table id="AAA" style="width: 800px;height: 500px;" border="1px">
        <th colspan="7" align="left">

        姓名<input name="followName"  type="text" id="Uname" readonly="readonly" style="border: none;outline: medium;"/>
            编号<input type="text" id="Unum" name="followNumber" readonly="readonly" style="border: none;outline: medium;"/></th>

        <tr><td colspan="2">随访日期</td><td colspan="5"><input  type="text" name="followDate"  class="easyui-datebox" required="required" id="Udate" /></td></tr>
        <tr><td align="2">本次随访形式</td><td colspan="5">
            <input type="radio" name="followForm" value="1">1门诊
            <input type="radio" name="followForm" value="2">2家庭访视
            <input type="radio" name="followForm" value="3">3电话
        </tr>

        <tr><td align="2">若失访,原因</td><td colspan="5">
            <input type="radio" name="followLoss" value="1">外出打工
            <input type="radio" name="followLoss" value="2">迁居他处
            <input type="radio" name="followLoss" value="3">走失
            <input type="radio" name="followLoss" value="4">连续3次未到访
            <input type="radio" name="followLoss" value="5">其他</td>
        </tr>

        <tr><td rowspan="4">如死亡日期和原因</td></tr>
        <tr><td>死亡时间</td><td colspan="6"><input type="text"  class="easyui-datebox" required="required" name="followDietime"></td></tr>
        <tr><td>死亡原因</td><td colspan="6">
            <input type="radio" name="followDiereason" value="1">躯体疾病
            <input type="radio" name="followDiereason" value="2">自杀
            <input type="radio" name="followDiereason" value="3">他杀
            <input type="radio" name="followDiereason" value="4">意外
            <input type="radio" name="followDiereason" value="5">精神疾病相关并发症
            <input type="radio" name="followDiereason" value="6">其他
        </td></tr>
        <tr><td>身体残疾</td><td colspan="6">
            <input type="radio" name="followDisability" value="1">传染病和寄生虫
            <input type="radio" name="followDisability" value="2">肿瘤
            <input type="radio" name="followDisability" value="3">心脏病
            <input type="radio" name="followDisability" value="4">脑血管病
            <input type="radio" name="followDisability" value="5">呼吸系统疾病
            <input type="radio" name="followDisability" value="6">消化系统疾病
            <input type="radio" name="followDisability" value="7">其他疾病
            <input type="radio" name="followDisability" value="8">不详

        </td></tr>

        <tr><td colspan="2">危险性评估</td><td colspan="5">
            <input type="radio" name="followAssess" value="1">0(0级)
            <input type="radio" name="followAssess" value="2">1(1级)
            <input type="radio" name="followAssess" value="3">2(2级)
            <input type="radio" name="followAssess" value="4">3(3级)
            <input type="radio" name="followAssess" value="5">4(4级)
            <input type="radio" name="followAssess" value="6">5(5级)
        </td></tr>

        <tr><td colspan="2">目前症状</td><td colspan="5">
            <select id="ddlLine2" class="easyui-combotree" style="width: 600px; height: 24px;"  name="followCusym" >
            </select>
        </td></tr>

        <tr><td>自知力</td><td colspan="6">
            <input type="radio" name="followInsight" value="1">自知力完全
            <input type="radio" name="followInsight" value="2">自知力不全
            <input type="radio" name="followInsight" value="3">自知力缺失
        </td></tr>
        <tr><td colspan="2">睡眠情况</td><td colspan="5">
            <input type="radio" name="followSleep" value="1">良好
            <input type="radio" name="followSleep" value="2">一般
            <input type="radio" name="followSleep" value="3">较差
        </td></tr>
        <tr><td colspan="2">饮食情况</td><td colspan="5">
            <input type="radio" name="followDiet" value="1">良好
            <input type="radio" name="followDiet" value="2">一般
            <input type="radio" name="followDiet" value="3">较差
        </td></tr>

        <tr><td rowspan="6">社会功能情况</td></tr>
        <tr><td>个人生活料理</td><td colspan="5">
            <input type="radio" name="followPersonal" value="1">良好
            <input type="radio" name="followPersonal" value="2">一般
            <input type="radio" name="followPersonal" value="3">较差
        </td></tr>
        <tr><td>家务劳动</td><td colspan="5">
            <input type="radio" name="followHousework" value="1">良好
            <input type="radio" name="followHousework" value="2">一般
            <input type="radio" name="followHousework" value="3">较差
        </td></tr>
        <tr><td>生产劳动及工作</td><td colspan="5">
            <input type="radio" name="followLabour" value="1">良好
            <input type="radio" name="followLabour" value="2">一般
            <input type="radio" name="followLabour" value="3">较差
        </td></tr>
        <tr><td>学习能力</td><td colspan="5">
            <input type="radio" name="followStuability" value="1">良好
            <input type="radio" name="followStuability" value="2">一般
            <input type="radio" name="followStuability" value="3">较差
        </td></tr>
        <tr><td>社会人际交往</td><td colspan="5">
            <input type="radio" name="followInterpersonal" value="1">良好
            <input type="radio" name="followInterpersonal" value="2">一般
            <input type="radio" name="followInterpersonal" value="3">较差
        </td></tr>


        <tr><td rowspan="4">危险行为</td></tr>
        <tr>
            <td>1轻度滋事</td><td><input type="text" style="border: none;outline: medium;width: 100%;height: 100%" value="0" name="followAffray" id="Uff" class="easyui-numberbox" suffix="/次"></td>
            <td>2肇事</td><td><input type="text" value="0" name="followAccident" id="Ufa" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
            <td>3肇祸</td><td><input type="text" value="0" name="followAccidentcause" id="Ufad" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
        </tr>
        <tr>
            <td>4其他危害行为</td><td><input type="text" value="0" name="followHazard" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
            <td>5自伤</td><td><input type="text" value="0" name="followAutolesion" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
            <td>6自杀未遂</td><td><input type="text" value="0" name="followSuicide" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
        </tr>
        <tr>
            <td colspan="6"><input type="checkbox">无</td>
        </tr>

        <tr><td colspan="2">两次随访期间关锁情况</td><td colspan="5">
            <input type="radio" name="followLockcase" value="1">1无关锁
            <input type="radio" name="followLockcase" value="2">2关锁
            <input type="radio" name="followLockcase" value="3">3关锁已解除
        </td></tr>

        <tr><td colspan="2">两次随访期间住院情况</td><td colspan="3">
            <input type="radio" name="followHospital" value="1">1从未住院
            <input type="radio" name="followHospital" value="2">2目前正在住院
            <input type="radio" name="followHospital" value="3">3既往住院
        </td>
            <td>末次出院时间</td><td><input type="text"  class="easyui-datebox" required="required" name="followOuthospital"> </td>
        </tr>


        <tr><td colspan="2">实验室检查</td><td colspan="5">
            <input type="radio" name="followLabcheck" value="1">1无
            <input type="radio" name="followLabcheck" value="2">2有
        </td></tr>

        <tr><td colspan="2">用药依从性</td><td colspan="5">
            <input type="radio" name="followPharmacy" value="1">1按医嘱规律服药
            <input type="radio" name="followPharmacy" value="2">2间断服药
            <input type="radio" name="followPharmacy" value="3">3不服药
            <input type="radio" name="followPharmacy" value="4">4遗嘱无需服药
        </td>
        </tr>


        <tr><td colspan="2">药物不良反应</td><td colspan="5">
            <input type="radio" name="followDrugeffect" value="1">1无
            <input type="radio" name="followDrugeffect" value="2">2有
            <input type="radio" name="followDrugeffect" value="3">3此项不适用
        </td>
        </tr>


        <tr><td colspan="2">治疗效果</td><td colspan="5">
            <input type="radio" name="followTreatres" value="1">1痊愈
            <input type="radio" name="followTreatres" value="2">2好转
            <input type="radio" name="followTreatres" value="3">3无变化
            <input type="radio" name="followTreatres" value="4">4加重
        </td>
        </tr>

        <tr><td>是否转诊</td><td>
            <input type="radio" name="followTransfer" value="1">1否
            <input type="radio" name="followTransfer" value="2">2是

        </td>
            <td>转诊原因</td><td><input type="text" name="followTrareason" id="Ufrea"  style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
            <td>转诊至机构及科室</td><td colspan="2"><input type="text" name="followTraorgan" id="Ufg"  style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
        </tr>

        <tr><td rowspan="3">用药情况</td>
        </tr>
        <tr><td>药物名称</td><td>用法</td><td>每日次数</td><td colspan="3">每次剂量</td></tr>
        <tr><td><input type="text" name="followMedname" id="UMname" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
            <td><input type="text" name="followMeduse" id="UMuse" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
            <td><input type="text" name="followDaily" id="MUday" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
            <td colspan="3"><input type="text" name="followDose" id="MUdose" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
        </tr>

        <tr><td colspan="2">用药指导</td><td colspan="5">
            <input type="text"  name="followDirect" style="border: none;outline: medium;width: 100%;height: 100%"/>
        </td></tr>

        <tr><td colspan="2">康复措施</td><td colspan="5">
            <select id="ddlLine4" class="easyui-combotree" style="width: 600px; height: 24px;"  name="followRecover" >
            </select>
        </td></tr>

        <tr><td colspan="2">本次随访分类</td>
            <td colspan="5">
                <input type="radio" name="followSort" value="1">1不稳定
                <input type="radio" name="followSort" value="2">2基本稳定
                <input type="radio" name="followSort" value="3">3稳定
            </td>
        </tr>

        <tr><td colspan="2">下次随访日期</td><td><input type="text"  class="easyui-datebox" required="required"  id="UNd" name="followNextdate"/></td>
            <td>随访医生签名</td><td colspan="3">

                <select type="text"  style="border: none;outline: medium;width: 350px;appearance:none; -moz-appearance:none;-webkit-appearance:none;"  class="easyui-combobox easyui-validatebox" data-options="required:true, missingMessage:'请填写姓名'"  name="followDoctorsign" id="healthcheckDoctor">
                </select>
            </td>
        </tr>

    </table>

    </form>
</div>
















<!--添加-->

<div id="add-dialog"  style="width: 840px;height: 500px;">
        <form id="add-form" method="post">
<table id="AM1" style="width: 800px;height: 500px;border-collapse:collapse;
        border:1px solid black;" border="1px">
    <th colspan="7"  align="left">

        姓名<input name="followName" type="text" id="Aname" readonly="readonly"  style="border: none;outline: medium;"/>

        编号&nbsp;&nbsp;&nbsp;<input type="text" id="Anum" name="followNumber" readonly="readonly" style="border: none;outline: medium;"/></th>
    <tr><td>随访日期</td><td colspan="6"><input type="text" readonly="readonly" name="followDate" id="Adate"  style="border: none;outline: medium;width: 100%;height: 100%"/></td></tr>
    <tr><td colspan="2">本次随访形式</td><td colspan="5">
        <input type="radio" name="followForm" value="1">1门诊
        <input type="radio" name="followForm" value="2">2家庭访视
        <input type="radio" name="followForm" value="3">3电话
    </tr>

    <tr><td  colspan="2">若失访,原因</td><td colspan="5">
        <input type="radio" name="followLoss" value="1">外出打工
        <input type="radio" name="followLoss" value="2">迁居他处
        <input type="radio" name="followLoss" value="3">走失
        <input type="radio" name="followLoss" value="4">连续3次未到访
        <input type="radio" name="followLoss" value="5">其他</td>
    </tr>

    <tr><td rowspan="4">如死亡日期和原因</td></tr>
    <tr><td>死亡时间</td><td colspan="6"><input type="text"  disabled="disabled" name="followDietime"></td></tr>
    <tr><td>死亡原因</td><td colspan="6">
        <input type="radio" name="followDiereason" value="1">躯体疾病
        <input type="radio" name="followDiereason" value="2">自杀
        <input type="radio" name="followDiereason" value="3">他杀
        <input type="radio" name="followDiereason" value="4">意外
        <input type="radio" name="followDiereason" value="5">精神疾病相关并发症
        <input type="radio" name="followDiereason" value="6">其他
    </td></tr>
    <tr><td>身体残疾</td><td colspan="6">
        <input type="radio" name="followDisability" value="1">传染病和寄生虫
        <input type="radio" name="followDisability" value="2">肿瘤
        <input type="radio" name="followDisability" value="3">心脏病
        <input type="radio" name="followDisability" value="4">脑血管病
        <input type="radio" name="followDisability" value="5">呼吸系统疾病
        <input type="radio" name="followDisability" value="6">消化系统疾病
        <input type="radio" name="followDisability" value="7">其他疾病
        <input type="radio" name="followDisability" value="8">不详

    </td></tr>

    <tr><td colspan="2">危险性评估</td><td colspan="5">
        <input type="radio" name="followAssess" value="1">0(0级)
        <input type="radio" name="followAssess" value="2">1(1级)
        <input type="radio" name="followAssess" value="3">2(2级)
        <input type="radio" name="followAssess" value="4">3(3级)
        <input type="radio" name="followAssess" value="5">4(4级)
        <input type="radio" name="followAssess" value="6">5(5级)
    </td></tr>

    <tr><td colspan="2">目前症状</td><td colspan="5">
        <select id="ddlLine1" class="easyui-combotree" style="width: 650px; height: 24px;"  name="followCusym" >
        </select>
    </td></tr>

    <tr><td>自知力</td><td colspan="6">
        <input type="radio" name="followInsight" value="1">自知力完全
        <input type="radio" name="followInsight" value="2">自知力不全
        <input type="radio" name="followInsight" value="3">自知力缺失
    </td></tr>
    <tr><td>睡眠情况</td><td colspan="6">
        <input type="radio" name="followSleep" value="1">良好
        <input type="radio" name="followSleep" value="2">一般
        <input type="radio" name="followSleep" value="3">较差
    </td></tr>
    <tr><td>饮食情况</td><td colspan="6">
        <input type="radio" name="followDiet" value="1">良好
        <input type="radio" name="followDiet" value="2">一般
        <input type="radio" name="followDiet" value="3">较差
    </td></tr>

    <tr><td rowspan="6">社会功能情况</td></tr>
    <tr><td>个人生活料理</td><td colspan="5">
        <input type="radio" name="followPersonal" value="1">良好
        <input type="radio" name="followPersonal" value="2">一般
        <input type="radio" name="followPersonal" value="3">较差
    </td></tr>
    <tr><td>家务劳动</td><td colspan="5">
        <input type="radio" name="followHousework" value="1">良好
        <input type="radio" name="followHousework" value="2">一般
        <input type="radio" name="followHousework" value="3">较差
    </td></tr>
    <tr><td>生产劳动及工作</td><td colspan="5">
        <input type="radio" name="followLabour" value="1">良好
        <input type="radio" name="followLabour" value="2">一般
        <input type="radio" name="followLabour" value="3">较差
    </td></tr>
    <tr><td>学习能力</td><td colspan="5">
        <input type="radio" name="followStuability" value="1">良好
        <input type="radio" name="followStuability" value="2">一般
        <input type="radio" name="followStuability" value="3">较差
    </td></tr>
    <tr><td>社会人际交往</td><td colspan="5">
        <input type="radio" name="followInterpersonal" value="1">良好
        <input type="radio" name="followInterpersonal" value="2">一般
        <input type="radio" name="followInterpersonal" value="3">较差
    </td></tr>


    <tr><td rowspan="4">危险行为</td></tr>
    <tr>
        <td>1轻度滋事</td><td><input type="text" value="0" name="followAffray" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
        <td>2肇事</td><td><input type="text" value="0" name="followAccident" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
        <td>3肇祸</td><td><input type="text" value="0" name="followAccidentcause" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
    </tr>
    <tr>
        <td>4其他危害行为</td><td><input type="text" value="0" name="followHazard" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
        <td>5自伤</td><td><input type="text" value="0" name="followAutolesion" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
        <td>6自杀未遂</td><td><input type="text" value="0" name="followSuicide" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox" suffix="/次"></td>
    </tr>
    <tr>
        <td colspan="6"><input type="checkbox">无</td>
    </tr>

    <tr><td colspan="2">两次随访期间关锁情况</td><td colspan="5">
        <input type="radio" name="followLockcase" value="1">1无关锁
        <input type="radio" name="followLockcase" value="2">2关锁
        <input type="radio" name="followLockcase" value="3">3关锁已解除
    </td></tr>

    <tr><td colspan="3">两次随访期间住院情况</td><td colspan="2">
        <input type="radio" name="followHospital" value="1">1从未住院
        <input type="radio" name="followHospital" value="2">2目前正在住院
        <input type="radio" name="followHospital" value="3">3既往住院
    </td>
        <td>末次出院时间</td><td><input type="text"  class="easyui-datebox" required="required" name="followOuthospital"> </td>
    </tr>

    <tr><td colspan="2">实验室检查</td><td colspan="5">
        <input type="radio" name="followLabcheck" value="1">1无
        <input type="radio" name="followLabcheck" value="2">2有
    </td></tr>

    <tr><td colspan="2">用药依从性</td><td colspan="5">
        <input type="radio" name="followPharmacy" value="1">1按医嘱规律服药
        <input type="radio" name="followPharmacy" value="2">2间断服药
        <input type="radio" name="followPharmacy" value="3">3不服药
        <input type="radio" name="followPharmacy" value="4">4遗嘱无需服药
    </td>
    </tr>


    <tr><td colspan="2">药物不良反应</td><td colspan="5">
        <input type="radio" name="followDrugeffect" value="1">1无
        <input type="radio" name="followDrugeffect" value="2">2有
        <input type="radio" name="followDrugeffect" value="3">3此项不适用
    </td>
    </tr>


    <tr><td colspan="2">治疗效果</td><td colspan="5">
        <input type="radio" name="followTreatres" value="1">1痊愈
        <input type="radio" name="followTreatres" value="2">2好转
        <input type="radio" name="followTreatres" value="3">3无变化
        <input type="radio" name="followTreatres" value="4">4加重
    </td>
    </tr>

    <tr><td colspan="2">是否转诊</td><td>
        <input type="radio" name="followTransfer" value="1">1否
        <input type="radio" name="followTransfer" value="2">2是

    </td>
        <td>转诊原因</td><td><input type="text" name="followTrareason" style="border: none;outline: medium;width: 100%;height: 100%"></td>
        <td>转诊至机构及科室</td><td><input type="text" name="followTraorgan" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
    </tr>

    <tr><td rowspan="3">用药情况</td>
    </tr>
    <tr><td>药物名称</td><td>用法</td><td>每日次数</td><td colspan="3">每次剂量</td></tr>
    <tr><td><input type="text" name="followMedname" style="border: none;outline: medium;width: 100%;height: 100%"></td>
        <td><input type="text" name="followMeduse" style="border: none;outline: medium;width: 100%;height: 100%"></td>
        <td><input type="text" name="followDaily" oninput="value=value.replace(/[^\d]/g,'')" maxlength="1" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
        <td colspan="3"><input type="text" name="followDose" style="border: none;outline: medium;width: 100%;height: 100%" class="easyui-numberbox"></td>
    </tr>

    <tr><td colspan="2">用药指导</td>
        <td colspan="5">
            <input type="text" name="followDirect"  style="border: none;outline: medium;width: 100%;height: 100%"/>
        </td></tr>

    <tr><td colspan="2">康复措施</td><td colspan="5">
        <select id="ddlLine3" class="easyui-combotree" style="width: 650px; height: 24px;"  name="followRecover" >
        </select>
    </td></tr>

    <tr><td colspan="2">本次随访分类</td>
        <td colspan="5">
            <input type="radio" name="followSort" value="1">1不稳定
            <input type="radio" name="followSort" value="2">2基本稳定
            <input type="radio" name="followSort" value="3">3稳定
        </td>
    </tr>

    <tr><td colspan="2">下次随访日期</td><td><input type="text"  readonly="readonly" id="ANd" name="followNextdate"  style="border: none;outline: medium;width: 100%;height: 100%"/></td>
        <td colspan="2">随访医生签名</td><td colspan="2"><!--<input type="text" name="followDoctorsign" id="Adoctor"/>-->

            <select type="text"  style="border: none;width: 250px;outline: medium;appearance:none; -moz-appearance:none;-webkit-appearance:none;"  class="easyui-combobox easyui-validatebox" data-options="required:true, missingMessage:'请填写姓名'"  name="followDoctorsign" id="healthcheckDoctor1">
            </select>
        </td>
    </tr>
   
</table>


        </form>
</div>


















<div id="process-dialog" class="easyui-dialog" data-options="closed:true,iconCls:'icon-upload',title:'正在上传图片'" style="width:450px; padding:10px;">
    <div id="p" class="easyui-progressbar" style="width:400px;" data-options="text:'正在上传中...'"></div>
</div>
<input type="file" id="photo-file" style="display:none;" onchange="upload()">
<!--引入叫本页面<%@include file="../common/footer.jsp"%>-->
<div th:replace="common/footer :: myfooter"  ></div>


<!-- End of easyui-dialog -->
<script type="text/javascript" th:inline="none">

    $(function () {
        $('#ddlLine1').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:      [{ "id": 1, "text": "1幻觉" }, { "id": 2, "text": "2交流困难" }, { "id": 3, "text": "3猜疑" }
                ,{ "id": 4, "text": "4喜怒无常" }, { "id": 5, "text": "5行为怪异" }, { "id": 6, "text": "6兴奋话多" },{ "id": 7, "text": "7伤人毁物" }
                ,{ "id": 8, "text": "8悲观厌世" }, { "id": 9, "text": "9无故外走" },{ "id": 10, "text": "10自笑自语" }, { "id": 11, "text": "11孤僻懒散" },{ "id": 12, "text": "12其他" }
            ] ,

        });
    })

    $(function () {
        $('#ddlLine2').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:   [{ "id": 1, "text": "1幻觉" }, { "id": 2, "text": "2交流困难" }, { "id": 3, "text": "3猜疑" }
                ,{ "id": 4, "text": "4喜怒无常" }, { "id": 5, "text": "5行为怪异" }, { "id": 6, "text": "6兴奋话多" },{ "id": 7, "text": "7伤人毁物" }
                ,{ "id": 8, "text": "8悲观厌世" }, { "id": 9, "text": "9无故外走" },{ "id": 10, "text": "10自笑自语" }, { "id": 11, "text": "11孤僻懒散" },{ "id": 12, "text": "12其他" }
            ],

        });
    })





    $(function () {
        $('#ddlLine3').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:   [{ "id": 1, "text": "1生活劳动能力" }, { "id": 2, "text": "2职业训练" }, { "id": 3, "text": "3学习能力" }
                ,{ "id": 4, "text": "4社会交往" }] ,

        });
    })



    $(function () {
        $('#ddlLine4').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:    [{ "id": 1, "text": "1生活劳动能力" }, { "id": 2, "text": "2职业训练" }, { "id": 3, "text": "3学习能力" }
                ,{ "id": 4, "text": "4社会交往" }] ,

        });
    })






    $(function () {
        $("#userSearch1").click(function () {
            $("#data-datagrid1").datagrid({
                queryParams: {
                    recordName2: $("input[name=recordName2]").val(),
                    recordAdress1:$("input[name=recordAdress1]").val(),
                    userBirthday1:$("input[name=userBirthday1]").val()
                }
            });

        });
    });




    $(function () {
        $("#userSearch").click(function () {
            $("#data-datagrid").datagrid({
                queryParams: {
                    recordName: $("input[name=recordName]").val()
                }
            });

        });
    });



    /**
     * 删除记录
     */
    function remove(){
        $.messager.confirm('信息提示','确定要删除该记录？', function(result){
            if(result){
                var item = $('#data-datagrid').datagrid('getSelections');
                if(item == null || item.length == 0){
                    $.messager.alert('信息提示','请选择要删除的数据！','info');
                    return;
                }
                var ids = '';
                for(var i=0;i<item.length;i++){
                    ids += item[i].followRecordsid + ',';
                }
                $.ajax({
                    url:'../UserList/delete',
                    dataType:'json',
                    type:'post',
                    data:{ids:ids},
                    success:function(data){
                        if(data.type == 'success'){
                            $.messager.alert('信息提示','删除成功！','info');
                            $('#data-datagrid').datagrid('reload');
                        }else{
                            $.messager.alert('信息提示',data.msg,'warning');
                        }
                    }
                });
            }
        });
    }



    /**
     * 载入数据
     */

        $('#data-datagrid').datagrid({
            url: 'list',
            rownumbers: true,
            singleSelect: false,
            pageSize: 20,
            pagination: true,
            multiSort: true,
            fitColumns: true,
            idField: 'id',
            treeField: 'name',
            fit: true,
                    onDblClickRow: function (rowIndex, row) {
                $('#edit-dialog').dialog({
                    closed: false,
                    modal:true,
                    title: "修改健康档案对象",
                    buttons: [{
                        text: '确定',
                        iconCls: 'icon-ok',
                        handler: edit
                    }, {
                        text: '取消',
                        iconCls: 'icon-cancel',
                        handler: function () {
                            $('#edit-dialog').dialog('close');
                        }
                    }],
                    onBeforeOpen:function(){
                       // alert(row.followRecordsid);
                        $.ajax({
                            url:'../UserList/findByid',
                            dataType:'json',
                            type:'post',
                            data:'followRecordsid='+row.followRecordsid,
                            success:function(d){
                                $('#edit-form').form('load',d[0]);
                            }
                        });
                    }
                });
                        $.ajax({
                            type: "post",
                            url: "queryDoctor",
                            dataType: "json",
                            success: function (date) {
                                $("#healthcheckDoctor").combobox({
                                    mode: 'remote',
                                    url: 'queryDoctor',
                                    valueField: 'lastname',
                                    textField: 'lastname',
                                    delay: 100
                                });
                            }
                        });

                    },

            columns: [[
                {field: 'userId', checkbox: true},
                {field: 'recordInputtingcard', title: '建档立卡号', width: 100},
                {field: 'recordName', title: '姓名', width: 100, align: 'center'},
                {field: 'userSex', title: '性别', width: 100, sortable: true,formatter:function(value,row,index){
                        switch(value){
                            case 0:{
                                return '未知';
                            }
                            case 1:{
                                return '男';
                            }
                            case 2:{
                                return '女';
                            }
                        }
                        return value;
                    }},
                {field: 'userBirthday', title: '出生日期', width: 100},
                {field: 'recordAdress', title: '联系地址', width: 100},
                {field: 'userMyphone', title: '联系电话', width: 100, sortable: true},
                {field: 'userState', title: '结案状态', width: 100, sortable: true},
                {field: 'followRecordsid', title: '序号', width: 100, sortable: true},
                {field: 'followDate', title: '随访日期', width: 100, sortable: true},
                {field: 'followNextdate', title: '下次随访时间', width: 100, sortable: true},
                {field: 'followDoctorsign', title: '随访医生', width: 100, sortable: true,},
                {field: 'followSort', title: '随访分类', width: 100, sortable: true,formatter:function(value,row,index){
                        switch(value){
                            case 1:{
                                return '不稳定';
                            }
                            case 2:{
                                return '基本稳定';
                            }
                            case 3:{
                                return '稳定';
                            }
                        }
                        return value;
                    }},
                {field: 'followDate', title: '录入日期', width: 100, sortable: true,formatter:function (value,row,index) {



                    }}
                /*{ field:'USER_DE',title:'备用列',width:100}*/
            ]],

            onLoadSuccess: function (data) {
                $('.authority-edit').linkbutton({text: '编辑权限', plain: true, iconCls: 'icon-edit'});
            }
        });




    /**
     * Name 修改记录
     */
    function edit(){
        var validate = $("#edit-form").form("validate");
        if(!validate){
            $.messager.alert("消息提醒","请检查你输入的数据!","warning");
            return;
        }
        var data = $("#edit-form").serialize();
        $.ajax({
            url:'../UserList/edit',
            dataType:'json',
            type:'post',
            data:data,
            success:function(data) {
                if (data > 0) {
                    $.messager.alert('信息提示', '修改成功！', 'info');
                    $('#edit-dialog').dialog('close');
                    $('#data-datagrid').datagrid('reload');
                } else {
                    $.messager.alert('信息提示', data.msg, 'warning');
                }
            }
        });
    }












function openAdd(){

        $('#data-datagrid1').datagrid({
            url:'../UserList/list',
            rownumbers:true,
            singleSelect:false,
            pageSize:20,
            pagination:true,
            multiSort:true,
            fitColumns:true,
            idField:'id',
            treeField:'name',
            fit:true,
            onDblClickRow:function(rowIndex,row){
                $("#Aname").val(row.recordName);
                $("#Anum").val(row.recordInputtingcard);
                $("#ULM").dialog('close');
                $('#add-dialog').dialog({
                    closed: false,
                    modal:true,
                    title: "新增档案选取",
                    buttons: [{
                        text: '确定',
                        iconCls: 'icon-ok',
                        handler: add
                    }
                    , {
                        text: '取消',
                        iconCls: 'icon-cancel',
                        handler: function () {
                            $('#add-dialog').dialog('close');
                        }
                    }
                    ],
                    onBeforeOpen:function(){
                        //$("#add-form input").val('');
                    }
                });
               var now = new Date();
                var h = now.getFullYear();
                var m = (now.getMonth() + 1>9) ? now.getMonth() + 1 : "0"+(now.getMonth() + 1);
                var s = (now.getDate()>9)  ? now.getDate()  : "0"+now.getDate();
                document.getElementById("Adate").value = h+"-"+m+"-"+s;

                var h1=h;
                var m1=m+3;
                var s1=s;
                if(m1>12){
                    m1=m1-12;
                    h1+=1;

                    document.getElementById("ANd").value = h1+'-'+m1+'-'+s1;

                }
                $.ajax({
                    type: "post",
                    url: "queryDoctor",
                    dataType: "json",
                    success: function (date) {
                        $("#healthcheckDoctor1").combobox({
                            mode: 'remote',
                            url: 'queryDoctor',
                            valueField: 'lastname',
                            textField: 'lastname',
                            delay: 100
                        });
                    }
                });


            },
            columns:[[
                { field:'userId',checkbox:true},
                { field:'recordInputtingcard',title:'建档立卡号',width:100},
                { field:'recordName',title:'姓名',width:100,align:'center'},
                { field:'userBirthday',title:'出生日期',width:100},
                { field:'recordAdress',title:'现住地址',width:100},
                { field:'userMyphone',title:'联系电话',width:100,sortable:true}
            ]],
            onLoadSuccess:function(data){
                $('.authority-edit').linkbutton({text:'编辑权限',plain:true,iconCls:'icon-edit'});
            }
        });
    $("#ULM").dialog({
        closed: false,
        modal:true,
        title: "健康档案选取",
        buttons: [{
            text: '确定',
            iconCls: 'icon-ok',
            handler: add
        },
           /* {
            text: '取消',
            iconCls: 'icon-cancel',
            handler: function () {
                $('#add-dialog').dialog('close');
            }
        }*/
        ],
        onBeforeOpen:function(){
            //$("#add-form input").val('');
        }
    });


}
    function add(){
        var validate = $("#add-form").form("validate");

        if(!validate){
            $.messager.alert("消息提醒","请检查你输入的数据!","warning");
            return;
        }

        var data = $("#add-form").serialize();

        $.ajax({
            url:'../UserList/add',
            dataType:'json',
            type:'post',
            data:data,
            success:function(data){
            //    alert( document.getElementById("ANd").value);
                if(data>0){
                    $.messager.alert('信息提示','添加成功！','info');
                    $('#add-dialog').dialog('close');
                    $('#data-datagrid').datagrid('reload');
                }else{
                    $.messager.alert('信息提示',data.msg,'warning');
                }

            }
        });
    }

</script>