<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<!--引入抬头页面-->
<div th:replace="common/header :: header"  ></div>

<div class="easyui-layout" data-options="fit:true">
    <!-- Begin of toolbar -->
    <div id="wu-toolbar">
        <div class="wu-toolbar-button">
            <!--引入菜单页面-->
            <div th:replace="common/menus :: menus"  > </div>
        </div>

        <!--条件搜索-->
        <div class="wu-toolbar-search">
            <label> 姓名:</label><input name="recordName"/>
            <a href="#" id="userSearch" class="easyui-linkbutton" iconCls="icon-search">搜索</a>
        </div>

    </div>
    <!-- End of toolbar 数据table表格 -->
    <table id="data-datagrid" class="easyui-datagrid" toolbar="#wu-toolbar"></table>

</div>

<div id="add-dialog"  style="width: 800px;height: 500px;">
    <form id="add-form" method="post">
        <table border="1">
            <thead><input type="text" id="Crd" name="recordId" hidden="hidden" style="border: none;outline: medium;width: 100%;height: 100%"></thead>
            <tr>
                <td>卡号</td>
                <td colspan="2"><input type="text" readonly="readonly" id="Ccard" name="addnewbornCardnum" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>建册日期</td>
                <td colspan="2"><input type="text" id="Cdate" name="addnewbornConstructiondate" readonly="readonly"></td>
            </tr>
            <tr>
                <td>姓名</td>
                <td colspan="2"><input type="text" readonly="readonly" id="Cname" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>性别</td>
                <td colspan="2">
                <select id="Csex" style="border: none;outline: medium;width: 100%;height: 100%;appearance:none; -moz-appearance:none;-webkit-appearance:none;">
                    <option value="1">男</option>
                    <option value="2">女</option>
                </select>
                </td>
            </tr>

            <tr>
                <td>分娩孕周</td>
                <td colspan="2"><input type="text" class="easyui-validatebox" data-options="required:true" name="addnewbornLaborweek" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>分娩地点</td>
                <td colspan="2"><input type="text" name="addnewbornLaborarea" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>分娩时间</td>
                <td colspan="2"><input type="text" id="Cbd" readonly="readonly" name="addnewbornLabordate"></td>
                <td>分娩方式</td>
                <td colspan="2">



                <select name="addnewbornLaborstyle" style="border: none;outline: medium;width: 100%;height: 100%;appearance:none; -moz-appearance:none;-webkit-appearance:none;">
                    <option value="1">顺产</option>
                    <option value="2">胎吸</option>
                    <option value="3">臀助</option>
                    <option value="4">臀牵引</option>
                    <option value="5">产钳</option>
                    <option value="6">剖宫产</option>
                    <option value="7">其它</option>
                </select>
                </td>
            </tr>


            <tr>
                <td>第几胎</td>
                <td><input type="text" name="addnewbornTyrenum" class="easyui-validatebox" data-options="required:true" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>第几产</td>
                <td><input type="text" name="addnewbornProducenum" class="easyui-validatebox" data-options="required:true" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>胎数</td>
                <td>
                    <select name="addnewbornTyrenumber" style="border: none;outline: medium;width: 100%;height: 100%;appearance:none; -moz-appearance:none;-webkit-appearance:none;">
                        <option value="1">单胎</option>
                        <option value="2">双胎</option>
                        <option value="3">多胎</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td>身长</td>
                <td colspan="2"><input type="text" class="easyui-validatebox" data-options="required:true" name="addnewbornHeight" style="border: none;outline: medium;width: 100%;height: 100%" suffix="cm"></td>
                <td>体重</td>
                <td colspan="2"><input type="text" class="easyui-validatebox" data-options="required:true" name="addnewbornWeight" style="border: none;outline: medium;width: 100%;height: 100%" suffix="kg"></td>
            </tr>

            <tr>
                <td>Apgar评分：1分钟</td>
                <td>
                    <input type="text" name="addnewbornApgarone" class="easyui-validatebox" data-options="required:true"   style="border: none;outline: medium;width: 100%;height: 100%">
                </td>
                <td>5分钟</td>
                <td>
                    <input type="text" name="addnewbornApgarfive" class="easyui-validatebox" data-options="required:true"  style="border: none;outline: medium;width: 100%;height: 100%">
                </td>
                <td>10分钟</td>
                <td>
                    <input type="text" name="addnewbornApgarten" class="easyui-validatebox" data-options="required:true"  style="border: none;outline: medium;width: 100%;height: 100%">
                </td>
            </tr>

            <tr><td>早接触,早吸允</td><td colspan="5"><input type="text" class="easyui-validatebox" data-options="required:true"    name="addnewbornSuckmin" style="border: none;outline: medium;width: 100%;height: 100%" prefix="产后" suffix="分钟"></td></tr>

            <tr>
                <td>维生素k1使用次数</td>
                <td colspan="2"><input type="text" value="0" name="addnewbornKnum" style="border: none;outline: medium;width: 100%;height: 100%" suffix="次"></td>
                <td>使用数量</td>
                <td colspan="2"><input type="text"  class="easyui-validatebox" data-options="required:true"  name="addnewbornKscale" style="border: none;outline: medium;width: 100%;height: 100%" suffix="ml"></td>
            </tr>


            <tr>
                <td>存活情况</td>
                <td colspan="5">
                    <input type="radio" name="addnewbornSurvival" value="1"/>1活产
                    <input type="radio" name="addnewbornSurvival" value="2"/>2死胎
                    <input type="radio" name="addnewbornSurvival" value="3"/>3死产
                </td>
            </tr>

            <tr>
                <td>新生儿死亡原因</td>
                <td colspan="5">

                    <select id="ddlLine1" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornDeathcauses" >
                    </select>
                </td>
            </tr>


            <tr>
                <td>出生缺陷</td>
                <td colspan="5">

                    <select id="ddlLine3" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornBirthdefect" >
                    </select>
                </td>
            </tr>

            <tr>
                <td>新生儿并发症</td>
                <td colspan="5">

                    <select id="ddlLine5" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornNeonatalcom" >
                    </select>
                </td>
            </tr>

            <tr><td rowspan="3">新生儿疾病筛选</td></tr>

            <tr><td>pku</td><td><input type="radio" name="addnewbornPku" value="1">1已做<input type="radio" name="addnewbornPku" value="2">2未做</td>
                <td></td><td>CH</td>
                <td><input type="radio" name="addnewbornCh" value="1">1已做<input type="radio" name="addnewbornCh" value="2">2未做</td>
            </tr>

            <tr><td>听力筛选</td><td colspan="4">
                <input type="radio" name="addnewbornHearing" value="1">1通过
                <input type="radio" name="addnewbornHearing" value="2">2未通过
                <input type="radio" name="addnewbornHearing" value="3">3未筛查
                <input type="radio" name="addnewbornHearing" value="4">4不详
            </td></tr>

            <tr>
                <td>卡介苗接种</td>
                <td><input type="radio" name="addnewbornBcgvacc" value="1">1已种
                    <input type="radio" name="addnewbornBcgvacc" value="2">2未种</td>
                <td></td>
                <td>乙肝疫苗接种</td>
                <td><input type="radio" name="addnewbornHepatitisvacc" value="1">1已种
                    <input type="radio" name="addnewbornHepatitisvacc" value="2">2未种</td></td>
                <td></td>
            </tr>

            <tr>
                <td>其它疫苗接种</td>
                <td colspan="5"><input type="text" name="addnewbornOtersacc" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>体弱儿情况</td>
                <td colspan="5"><input type="text" value="无" name="addnewbornWeakson" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>体弱儿情况</td>
                <td colspan="5"><input type="text" name="addnewbornWeakcase" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>体弱原因</td>
                <td colspan="5">

                    <select id="ddlLine7" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornGuidance" >
                    </select>
                </td>
            </tr>

            <tr>
                <td>新生儿出院日期</td>
                <td colspan="2"><input type="text"  class="easyui-datebox" required="required" name="addnewbornDischargeddate"></td>
                <td>接产医院</td>
                <td colspan="2"><input type="text" name="addnewbornMidwiferyhosp" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>接产者主手</td>
                <td colspan="2"><input type="text" name="addnewbornMidwiferymain" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>接产者副手</td>
                <td colspan="2"><input type="text" name="addnewbornMidwiferyport" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>
        </table>
    </form>
</div>




<div id="ULM" style="width: 670px;height: 500px">
    <div class="wu-toolbar-search">
        <label> 姓名:</label><input name="recordName1"/>
        <label> 住址:</label><input name="recordAdress"/>
        <label> 出生日期:</label><input name="userBirthday"/>
        <a href="#" id="userSearch1" class="easyui-linkbutton" iconCls="icon-search">搜索</a>
    </div>
    <table id="data-datagrid1" class="easyui-datagrid"></table>
</div>



<!--修改-->
<div id="edit-dialog"   style="width: 800px;height: 500px;">
    <form id="edit-form" method="post">
        <table border="1">
            <thead><input type="text" id="Crd1" name="recordId" hidden="hidden" style="border: none;outline: medium;width: 100%;height: 100%"></thead>
            <tr>
                <td>卡号</td>
                <td colspan="2"><input type="text" readonly="readonly" id="Ccard1" name="addnewbornCardnum" style="border: none;outline: medium;width: 100%;height: 100%">
                <input type="text" name="addnewbornId" id="aid" hidden="hidden" style="border: none;outline: medium;width: 100%;height: 100%"/>
                </td>
                <td>建册日期</td>
                <td colspan="2"><input type="text" id="Cdate1"  class="easyui-datebox" required="required" name="addnewbornConstructiondate"></td>
            </tr>
            <tr>
                <td>姓名</td>
                <td colspan="2"><input  readonly="readonly" type="text" id="Cname1" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>性别</td>
                <td colspan="2"><!--<input type="text" id="Csex1">-->
                <select id="Csex1" style="border: none;outline: medium;width: 100%;height: 100%;appearance:none; -moz-appearance:none;-webkit-appearance:none;">
                    <option value="1">男</option>
                    <option value="2">女</option>
                </select>
                </td>
            </tr>

            <tr>
                <td>分娩孕周</td>
                <td colspan="2"><input type="text" name="addnewbornLaborweek" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>分娩地点</td>
                <td colspan="2"><input type="text" name="addnewbornLaborarea" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>分娩时间</td>
                <td colspan="2"><input type="text"  class="easyui-datebox" required="required" id="Cbd1" name="addnewbornLabordate"></td>
                <td>分娩方式</td>
                <td colspan="2">

                    <select name="addnewbornLaborstyle" style="border: none;outline: medium;width: 100%;height: 100%;appearance:none; -moz-appearance:none;-webkit-appearance:none;">
                        <option value="1">顺产</option>
                        <option value="2">胎吸</option>
                        <option value="3">臀助</option>
                        <option value="4">臀牵引</option>
                        <option value="5">产钳</option>
                        <option value="6">剖宫产</option>
                        <option value="7">其它</option>
                    </select>

                </td>
            </tr>


            <tr>
                <td>第几胎</td>
                <td><input type="text" name="addnewbornTyrenum" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>第几产</td>
                <td><input type="text" name="addnewbornProducenum" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>胎数</td>
                <td>
                <select name="addnewbornTyrenumber" style="border: none;outline: medium;width: 100%;height: 100%;appearance:none; -moz-appearance:none;-webkit-appearance:none;">
                    <option value="1">单胎</option>
                    <option value="2">双胎</option>
                    <option value="3">多胎</option>
                </select>
                </td>
            </tr>

            <tr>
                <td>身长</td>
                <td colspan="2"><input type="text" name="addnewbornHeight" style="border: none;outline: medium;width: 100%;height: 100%" suffix="cm"></td>
                <td>体重</td>
                <td colspan="2"><input type="text" name="addnewbornWeight" style="border: none;outline: medium;width: 100%;height: 100%" suffix="kg"></td>
            </tr>

            <tr>
                <td>Apgar评分：1分钟</td>
                <td><input type="text" name="addnewbornApgarone" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>5分钟</td>
                <td><input type="text" name="addnewbornApgarfive" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>10分钟</td>
                <td><input type="text" name="addnewbornApgarten" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr><td>早接触,早吸允</td><td colspan="5"><input type="text" name="addnewbornSuckmin" style="border: none;outline: medium;width: 100%;height: 100%" prefix="产后" suffix="分钟"></td></tr>

            <tr>
                <td>维生素k1使用次数</td>
                <td colspan="2"><input type="text" value="0" name="addnewbornKnum" style="border: none;outline: medium;width: 100%;height: 100%" suffix="次"></td>
                <td>使用数量</td>
                <td colspan="2"><input type="text" name="addnewbornKscale" style="border: none;outline: medium;width: 100%;height: 100%" suffix="ml"></td>
            </tr>


            <tr>
                <td>存活情况</td>
                <td colspan="5">
                    <input type="radio" name="addnewbornSurvival" value="1"/>1活产
                    <input type="radio" name="addnewbornSurvival" value="2"/>2死胎
                    <input type="radio" name="addnewbornSurvival" value="3"/>3死产
                </td>
            </tr>

            <tr>
                <td>新生儿死亡原因</td>
                <td colspan="5">
                    <select id="ddlLine2" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornDeathcauses" >
                    </select>
                </td>
            </tr>


            <tr>
                <td>出生缺陷</td>
                <td colspan="5">
                    <select id="ddlLine4" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornBirthdefect" >
                    </select>
                </td>
            </tr>




            <tr>
                <td>新生儿并发症</td>
                <td colspan="5">
                    <select id="ddlLine6" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornNeonatalcom" >
                    </select>
                </td>
            </tr>




            <tr><td rowspan="3">新生儿疾病筛选</td></tr>

            <tr><td>pku</td><td><input type="radio" name="addnewbornPku" value="1">1已做<input type="radio" name="addnewbornPku" value="2">2未做</td>
                <td></td><td>CH</td>
                <td><input type="radio" name="addnewbornCh" value="1">1已做<input type="radio" name="addnewbornCh" value="2">2未做</td>
            </tr>

            <tr><td>听力筛选</td><td colspan="4">
                <input type="radio" name="addnewbornHearing" value="1">1通过
                <input type="radio" name="addnewbornHearing" value="2">2未通过
                <input type="radio" name="addnewbornHearing" value="3">3未筛查
                <input type="radio" name="addnewbornHearing" value="4">4不详
            </td></tr>

            <tr>
                <td>卡介苗接种</td>
                <td><input type="radio" name="addnewbornBcgvacc" value="1">1已种
                    <input type="radio" name="addnewbornBcgvacc" value="2">2未种</td>
                <td></td>
                <td>乙肝疫苗接种</td>
                <td><input type="radio" name="addnewbornHepatitisvacc" value="1">1已种
                    <input type="radio" name="addnewbornHepatitisvacc" value="2">2未种</td></td>
                <td></td>
            </tr>

            <tr>
                <td>其它疫苗接种</td>
                <td colspan="5"><input type="text" name="addnewbornOtersacc" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>体弱儿情况</td>
                <td colspan="5"><input type="text" value="无" name="addnewbornWeakson" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>体弱儿情况</td>
                <td colspan="5"><input type="text" name="addnewbornWeakcase" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>体弱原因</td>
                <td colspan="5">
                    <select id="ddlLine8" class="easyui-combotree" style="width: 650px; height: 24px;"  name="addnewbornGuidance" >
                    </select>
                </td>
            </tr>

            <tr>
                <td>新生儿出院日期</td>
                <td colspan="2"><input type="text"  class="easyui-datebox" required="required" name="addnewbornDischargeddate"></td>
                <td>接产医院</td>
                <td colspan="2"><input type="text" name="addnewbornMidwiferyhosp" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>

            <tr>
                <td>接产者主手</td>
                <td colspan="2"><input type="text" name="addnewbornMidwiferymain" style="border: none;outline: medium;width: 100%;height: 100%"></td>
                <td>接产者副手</td>
                <td colspan="2"><input type="text" name="addnewbornMidwiferyport" style="border: none;outline: medium;width: 100%;height: 100%"></td>
            </tr>
        </table>
    </form>
</div>




<div id="process-dialog" class="easyui-dialog" data-options="closed:true,iconCls:'icon-upload',title:'正在上传图片'" style="width:450px; padding:10px;">
    <div id="p" class="easyui-progressbar" style="width:400px;" data-options="text:'正在上传中...'"></div>
</div>
<input type="file" id="photo-file" style="display:none;" onchange="upload()">
<!--引入叫本页面<%@include file="../common/footer.jsp"%>-->
<div th:replace="common/footer :: myfooter"  ></div>


<!-- End of easyui-dialog -->
<script type="text/javascript" th:inline="none">

    $(function () {
        $('#ddlLine1').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:  [{ "id": 1, "text": "1前置胎盘" }, { "id": 2, "text": "2胎盘早剥" }, { "id": 3, "text": "3脐带因素" },
                { "id": 4, "text": "4胎儿窘迫" }, { "id": 5, "text": "5新生儿窒息" }, { "id": 6, "text": "6口腔保健指导" },
                { "id": 7, "text": "7产伤" }, { "id": 8, "text": "8早产" }, { "id": 9, "text": "9出生缺陷" },
                { "id": 10, "text": "10其他" }
            ] ,
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine1").combotree("setText", $("#ddlLine1").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine1").combotree("setText", $("#ddlLine1").combobox("getText").toString().replace("全选,",""));
            }
        });
    })

    $(function () {
        $('#ddlLine2').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data: [{ "id": 1, "text": "1前置胎盘" }, { "id": 2, "text": "2胎盘早剥" }, { "id": 3, "text": "3脐带因素" },
                { "id": 4, "text": "4胎儿窘迫" }, { "id": 5, "text": "5新生儿窒息" }, { "id": 6, "text": "6口腔保健指导" },
                { "id": 7, "text": "7产伤" }, { "id": 8, "text": "8早产" }, { "id": 9, "text": "9出生缺陷" },
                { "id": 10, "text": "10其他" }
            ],
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine2").combotree("setText", $("#ddlLine2").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine2").combotree("setText", $("#ddlLine2").combobox("getText").toString().replace("全选,",""));
            }
        });
    })





    $(function () {
        $('#ddlLine3').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:   [{ "id": 1, "text": "1神经管畸形" }, { "id": 2, "text": "2唇腭裂" }, { "id": 3, "text": "3先天愚型" },
                { "id": 4, "text": "4肢体畸形" }, { "id": 5, "text": "5其他" }],
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine3").combotree("setText", $("#ddlLine3").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine3").combotree("setText", $("#ddlLine3").combobox("getText").toString().replace("全选,",""));
            }
        });
    })



    $(function () {
        $('#ddlLine4').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:     [{ "id": 1, "text": "1神经管畸形" }, { "id": 2, "text": "2唇腭裂" }, { "id": 3, "text": "3先天愚型" },
                { "id": 4, "text": "4肢体畸形" }, { "id": 5, "text": "5其他" }] ,
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine4").combotree("setText", $("#ddlLine4").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine4").combotree("setText", $("#ddlLine4").combobox("getText").toString().replace("全选,",""));
            }
        });
    })



    $(function () {
        $('#ddlLine5').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:    [{ "id": 1, "text": "1重度窒息" }, { "id": 2, "text": "2肺炎" }, { "id": 3, "text": "3产伤" },
                { "id": 4, "text": "4呼吸窘迫综合症" }, { "id": 5, "text": "5脐部感染" }, { "id": 6, "text": "6硬肿症" },
                { "id": 7, "text": "7病理性黄疸" }, { "id": 8, "text": "8颅内出血" }, { "id": 9, "text": "9其他"}],
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine5").combotree("setText", $("#ddlLine5").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine5").combotree("setText", $("#ddlLine5").combobox("getText").toString().replace("全选,",""));
            }
        });
    })


    $(function () {
        $('#ddlLine6').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:   [{ "id": 1, "text": "1重度窒息" }, { "id": 2, "text": "2肺炎" }, { "id": 3, "text": "3产伤" },
                { "id": 4, "text": "4呼吸窘迫综合症" }, { "id": 5, "text": "5脐部感染" }, { "id": 6, "text": "6硬肿症" },
                { "id": 7, "text": "7病理性黄疸" }, { "id": 8, "text": "8颅内出血" }, { "id": 9, "text": "9其他"}],
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine6").combotree("setText", $("#ddlLine6").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine6").combotree("setText", $("#ddlLine6").combobox("getText").toString().replace("全选,",""));
            }
        });
    })



    $(function () {
        $('#ddlLine7').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:   [{ "id": 1, "text": "1喂养指导" }, { "id": 2, "text": "2发育指导" }, { "id": 3, "text": "3防病指导" },
                { "id": 4, "text": "4预防伤害指导" }, { "id": 5, "text": "5口腔保健指导" }] ,
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine7").combotree("setText", $("#ddlLine7").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine7").combotree("setText", $("#ddlLine7").combobox("getText").toString().replace("全选,",""));
            }
        });
    })

    $(function () {
        $('#ddlLine8').combotree({
            valueField: "id", //Value字段
            textField: "text", //Text字段
            multiple: true,
            data:  [{ "id": 1, "text": "1喂养指导" }, { "id": 2, "text": "2发育指导" }, { "id": 3, "text": "3防病指导" },
                { "id": 4, "text": "4预防伤害指导" }, { "id": 5, "text": "5口腔保健指导" }] ,
            //  url: "tree_data2.json", //数据源
            onCheck: function (node, checked) {
                //让全选不显示
                $("#ddlLine8").combotree("setText", $("#ddlLine8").combobox("getText").toString().replace("全选,", ""));
            },
            onClick: function (node, checked) {
                //让全选不显示
                $("#ddlLine8").combotree("setText", $("#ddlLine8").combobox("getText").toString().replace("全选,",""));
            }
        });
    })





















    $(function () {
        $("#userSearch1").click(function () {
            $("#data-datagrid1").datagrid({
                queryParams: {
                    recordName1: $("input[name=recordName1]").val(),
                    recordAdress:$("input[name=recordAdress]").val(),
                    userBirthday:$("input[name=userBirthday]").val()
                }
            });

        });
    });



    $(function () {
        $("#userSearch").click(function () {
            $("#data-datagrid").datagrid({
                queryParams: {
                    recordName: $("input[name=recordName]").val()
                }
            });

        });
    });

    /**
     * 删除记录
     */
    function remove(){
        $.messager.confirm('信息提示','确定要删除该记录？', function(result){
            if(result){
                var item = $('#data-datagrid').datagrid('getSelections');
                if(item == null || item.length == 0){
                    $.messager.alert('信息提示','请选择要删除的数据！','info');
                    return;
                }
                var ids = '';
                for(var i=0;i<item.length;i++){
                    ids += item[i].addnewbornId + ',';
                }
                $.ajax({
                    url:'delete',
                    dataType:'json',
                    type:'post',
                    data:{ids:ids},
                    success:function(data){
                        if(data.type == 'success'){
                            $.messager.alert('信息提示','删除成功！','info');
                            $('#data-datagrid').datagrid('reload');
                        }else{
                            $.messager.alert('信息提示',data.msg,'warning');
                        }
                    }
                });
            }
        });
    }


    /**
     * 载入数据
     */
    $('#data-datagrid').datagrid({
        url:'list',
        rownumbers:true,
        singleSelect:false,
        pageSize:20,
        pagination:true,
        multiSort:true,
        fitColumns:true,
        idField:'id',
        treeField:'name',
        fit:true,
        onDblClickRow: function (rowIndex, row) {
            $("#Cname1").val(row.recordName);
            $("#Csex1").val(row.userSex);
            $("#aid").val(row.addnewbornId);
            $('#edit-dialog').dialog({
                closed: false,
                modal: true,
                title: "修改登记对象",
                buttons: [{
                    text: '确定',
                    iconCls: 'icon-ok',
                    handler: edit
                }, {
                    text: '取消',
                    iconCls: 'icon-cancel',
                    handler: function () {
                        $('#edit-dialog').dialog('close');
                    }
                }],
                onBeforeOpen: function () {

                    $.ajax({
                        url: '../ChildCard/findByid',
                        dataType: 'json',
                        type: 'post',
                        data: 'addnewbornId=' + row.addnewbornId,
                        success: function (d) {
                            $('#edit-form').form('load', d[0]);
                        }
                    });
                }
            });
        },
        columns:[[
            { field:'userId',checkbox:true},
            { field:'recordInputtingcard',title:'建档立卡号',width:100},
            { field:'recordName',title:'姓名',width:100,align:'center'},
            { field:'userSex',title:'性别',width:100,sortable:true,formatter:function(value,row,index){
                    switch(value){
                        case 0:{
                            return '未知';
                        }
                        case 1:{
                            return '男';
                        }
                        case 2:{
                            return '女';
                        }
                    }
                    return value;
                }},
            { field:'userBirthday',title:'出生日期',width:100},
            { field:'recordAdress',title:'联系地址',width:100},
            { field:'userMyphone',title:'联系电话',width:100,sortable:true},
            { field:'recordData',title:'建册日期',width:100,sortable:true}
        ]],
        onLoadSuccess:function(data){
            $('.authority-edit').linkbutton({text:'编辑权限',plain:true,iconCls:'icon-edit'});
        }
    });


    function openAdd(){
        $('#data-datagrid1').datagrid({
            url:'../ChildCard/list',
            rownumbers:true,
            singleSelect:false,
            pageSize:20,
            pagination:true,
            multiSort:true,
            fitColumns:true,
            idField:'id',
            treeField:'name',
            fit:true,
            onDblClickRow:function(rowIndex,row){
              $("#Cname").val(row.recordName);
              $("#Csex").val(row.userSex);
              $("#Cbd").val(row.userBirthday);
              $("#Crd").val(row.userId);
              $("#Ccard").val(row.recordInputtingcard);
                $("#ULM").dialog('close');

                $('#add-dialog').dialog({
                    closed: false,
                    modal:true,
                    title: "新增对象登记",
                    buttons: [{
                        text: '确定',
                        iconCls: 'icon-ok',
                        handler: add
                    }, {
                        text: '取消',
                        iconCls: 'icon-cancel',
                        handler: function () {
                            $('#add-dialog').dialog('close');
                        }
                    }],
                    onBeforeOpen:function(){

                    }
                });

                var now = new Date();
                var h = now.getFullYear();
                var m = (now.getMonth() + 1>9) ? now.getMonth() + 1 : "0"+(now.getMonth() + 1);
                var s = (now.getDate()>9)  ? now.getDate()  : "0"+now.getDate();
                document.getElementById("Cdate").value = h+'-'+m+'-'+s;
            },
            columns:[[
                { field:'userId',checkbox:true},
                { field:'recordInputtingcard',title:'建档立卡号',width:100},
                { field:'recordName',title:'姓名',width:100,align:'center'},
                { field:'userBirthday',title:'出生日期',width:100},
                { field:'recordAdress',title:'现住地址',width:100},
                { field:'userMyphone',title:'联系电话',width:100,sortable:true}
            ]],
            onLoadSuccess:function(data){
                $('.authority-edit').linkbutton({text:'编辑权限',plain:true,iconCls:'icon-edit'});
            }
        });
        $("#ULM").dialog({
            closed: false,
            modal:true,
            title: "健康档案选取",
            buttons: [{
                text: '确定',
                iconCls: 'icon-ok'
            }, {
                text: '取消',
                iconCls: 'icon-cancel',
                handler: function () {
                    $('#ULM').dialog('close');
                }
            }],
            onBeforeOpen:function(){

            }
        });


    }
    function add(){
        var validate = $("#add-form").form("validate");

        if(!validate){
            $.messager.alert("消息提醒","请检查你输入的数据!","warning");
            return;
        }

        var data = $("#add-form").serialize();

        $.ajax({
            url:'../ChildCard/add',
            dataType:'json',
            type:'post',
            data:data,
            success:function(data){

                    $.messager.alert('信息提示','添加成功！','info');
                    $('#add-dialog').dialog('close');
                $('#data-datagrid').datagrid('reload');


            }
        });
    }

    /**
     * 打开修改窗口
     */
    function openEdit(){
        $('#edit-dialog').dialog({
            closed: false,
            modal:true,
            title: "修改",
            buttons: [{
                text: '确定',
                iconCls: 'icon-ok',
                handler: edit
            }, {
                text: '取消',
                iconCls: 'icon-cancel',
                handler: function () {
                    $('#edit-dialog').dialog('close');
                }
            }],
            onBeforeOpen:function(){

            }
        });
    }








    /**
     * Name 修改记录
     */
    function edit(){
        var validate = $("#edit-form").form("validate");
        if(!validate){
            $.messager.alert("消息提醒","请检查你输入的数据!","warning");
            return;
        }
        var data = $("#edit-form").serialize();
        $.ajax({
            url:'../ChildCard/edit',
            dataType:'json',
            type:'post',
            data:data,
            success:function(data) {
              //  alert(data);
                if (data > 0) {
                    $.messager.alert('信息提示', '修改成功！', 'info');
                    $('#edit-dialog').dialog('close');
                    $('#edit-dialog').treegrid('reload');
                } else {
                    $.messager.alert('信息提示','失败', 'warning');
                }
            }
        });
    }
</script>